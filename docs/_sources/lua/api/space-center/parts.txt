
.. default-domain:: lua
.. currentmodule:: SpaceCenter

.. _lua-api-parts:

Parts
=====

The following classes allow interaction with a vessels individual parts.

.. contents::
   :local:

Parts
-----

.. class:: Parts

   Instances of this class are used to interact with the parts of a vessel.
   An instance can be obtained by calling :attr:`Vessel.parts`.

   .. attribute:: all

      A list of all of the vessels parts.

      :Property: Read-only, cannot be set

      :rtype: list of :class:`Part`

   .. attribute:: root

      The vessels root part.

      :Property: Read-only, cannot be set

      :rtype: :class:`Part`

      .. note:: See the discussion on :ref:`lua-api-parts-trees-of-parts`.
   .. attribute:: controlling

      The part from which the vessel is controlled.

      :Property: Can be read or written

      :rtype: :class:`Part`

   .. method:: with_name(name)

      A list of parts whose :attr:`Part.name` is *name*.

      :param string name:

      :rtype: list of :class:`Part`

   .. method:: with_title(title)

      A list of all parts whose :attr:`Part.title` is *title*.

      :param string title:

      :rtype: list of :class:`Part`

   .. method:: with_module(module_name)

      A list of all parts that contain a :class:`Module` whose
      :attr:`Module.name` is *module_name*.

      :param string module_name:

      :rtype: list of :class:`Part`

   .. method:: in_stage(stage)

      A list of all parts that are activated in the given *stage*.

      :param number stage:

      :rtype: list of :class:`Part`

      .. note:: See the discussion on :ref:`lua-api-parts-staging`.
   .. method:: in_decouple_stage(stage)

      A list of all parts that are decoupled in the given *stage*.

      :param number stage:

      :rtype: list of :class:`Part`

      .. note:: See the discussion on :ref:`lua-api-parts-staging`.
   .. method:: modules_with_name(module_name)

      A list of modules (combined across all parts in the vessel) whose
      :attr:`Module.name` is *module_name*.

      :param string module_name:

      :rtype: list of :class:`Module`

   .. attribute:: decouplers

      A list of all decouplers in the vessel.

      :Property: Read-only, cannot be set

      :rtype: list of :class:`Decoupler`

   .. attribute:: docking_ports

      A list of all docking ports in the vessel.

      :Property: Read-only, cannot be set

      :rtype: list of :class:`DockingPort`

   .. method:: docking_port_with_name(name)

      The first docking port in the vessel with the given port name, as returned by :attr:`DockingPort.name`.
      Returns ``nil`` if there are no such docking ports.

      :param string name:

      :rtype: :class:`DockingPort`

   .. attribute:: engines

      A list of all engines in the vessel.

      :Property: Read-only, cannot be set

      :rtype: list of :class:`Engine`

   .. attribute:: landing_gear

      A list of all landing gear attached to the vessel.

      :Property: Read-only, cannot be set

      :rtype: list of :class:`LandingGear`

   .. attribute:: landing_legs

      A list of all landing legs attached to the vessel.

      :Property: Read-only, cannot be set

      :rtype: list of :class:`LandingLeg`

   .. attribute:: launch_clamps

      A list of all launch clamps attached to the vessel.

      :Property: Read-only, cannot be set

      :rtype: list of :class:`LaunchClamp`

   .. attribute:: lights

      A list of all lights in the vessel.

      :Property: Read-only, cannot be set

      :rtype: list of :class:`Light`

   .. attribute:: parachutes

      A list of all parachutes in the vessel.

      :Property: Read-only, cannot be set

      :rtype: list of :class:`Parachute`

   .. attribute:: radiators

      A list of all radiators in the vessel.

      :Property: Read-only, cannot be set

      :rtype: list of :class:`Radiator`

   .. attribute:: reaction_wheels

      A list of all reaction wheels in the vessel.

      :Property: Read-only, cannot be set

      :rtype: list of :class:`ReactionWheel`

   .. attribute:: sensors

      A list of all sensors in the vessel.

      :Property: Read-only, cannot be set

      :rtype: list of :class:`Sensor`

   .. attribute:: solar_panels

      A list of all solar panels in the vessel.

      :Property: Read-only, cannot be set

      :rtype: list of :class:`SolarPanel`


Part
----

.. class:: Part

   Instances of this class represents a part. A vessel is made of multiple parts.
   Instances can be obtained by various methods in :class:`Parts`.

   .. attribute:: name

      Internal name of the part, as used in
      `part cfg files <http://wiki.kerbalspaceprogram.com/wiki/CFG_File_Documentation>`_.
      For example "Mark1-2Pod".

      :Property: Read-only, cannot be set

      :rtype: string

   .. attribute:: title

      Title of the part, as shown when the part is right clicked in-game. For example "Mk1-2 Command Pod".

      :Property: Read-only, cannot be set

      :rtype: string

   .. attribute:: cost

      The cost of the part, in units of funds.

      :Property: Read-only, cannot be set

      :rtype: number

   .. attribute:: vessel

      The vessel that contains this part.

      :Property: Read-only, cannot be set

      :rtype: :class:`Vessel`

   .. attribute:: parent

      The parts parent. Returns ``nil`` if the part does not have a parent.
      This, in combination with :attr:`Part.children`, can be used to traverse the vessels parts tree.

      :Property: Read-only, cannot be set

      :rtype: :class:`Part`

      .. note:: See the discussion on :ref:`lua-api-parts-trees-of-parts`.
   .. attribute:: children

      The parts children. Returns an empty list if the part has no children.
      This, in combination with :attr:`Part.parent`, can be used to traverse the vessels parts tree.

      :Property: Read-only, cannot be set

      :rtype: list of :class:`Part`

      .. note:: See the discussion on :ref:`lua-api-parts-trees-of-parts`.
   .. attribute:: axially_attached

      Whether the part is axially attached to its parent, i.e. on the top
      or bottom of its parent. If the part has no parent, returns ``False``.

      :Property: Read-only, cannot be set

      :rtype: boolean

      .. note:: See the discussion on :ref:`lua-api-parts-attachment-modes`.
   .. attribute:: radially_attached

      Whether the part is radially attached to its parent, i.e. on the side of its parent.
      If the part has no parent, returns ``False``.

      :Property: Read-only, cannot be set

      :rtype: boolean

      .. note:: See the discussion on :ref:`lua-api-parts-attachment-modes`.
   .. attribute:: stage

      The stage in which this part will be activated. Returns -1 if the part is not activated by staging.

      :Property: Read-only, cannot be set

      :rtype: number

      .. note:: See the discussion on :ref:`lua-api-parts-staging`.
   .. attribute:: decouple_stage

      The stage in which this part will be decoupled. Returns -1 if the part is never decoupled from the vessel.

      :Property: Read-only, cannot be set

      :rtype: number

      .. note:: See the discussion on :ref:`lua-api-parts-staging`.
   .. attribute:: massless

      Whether the part is `massless <http://wiki.kerbalspaceprogram.com/wiki/Massless_part>`_.

      :Property: Read-only, cannot be set

      :rtype: boolean

   .. attribute:: mass

      The current mass of the part, including resources it contains, in kilograms.
      Returns zero if the part is massless.

      :Property: Read-only, cannot be set

      :rtype: number

   .. attribute:: dry_mass

      The mass of the part, not including any resources it contains, in kilograms. Returns zero if the part is massless.

      :Property: Read-only, cannot be set

      :rtype: number

   .. attribute:: impact_tolerance

      The impact tolerance of the part, in meters per second.

      :Property: Read-only, cannot be set

      :rtype: number

   .. attribute:: temperature

      Temperature of the part, in Kelvin.

      :Property: Read-only, cannot be set

      :rtype: number

   .. attribute:: skin_temperature

      Temperature of the skin of the part, in Kelvin.

      :Property: Read-only, cannot be set

      :rtype: number

   .. attribute:: max_temperature

      Maximum temperature that the part can survive, in Kelvin.

      :Property: Read-only, cannot be set

      :rtype: number

   .. attribute:: max_skin_temperature

      Maximum temperature that the skin of the part can survive, in Kelvin.

      :Property: Read-only, cannot be set

      :rtype: number

   .. attribute:: external_temperature

      Temperature of the atmosphere/vacuum surrounding the part, in Kelvin.
      This does not include heating from direct sunlight.

      :Property: Read-only, cannot be set

      :rtype: number

   .. attribute:: thermal_mass

      How much it takes to heat up the part.

      :Property: Read-only, cannot be set

      :rtype: number

   .. attribute:: thermal_skin_mass

      How much it takes to heat up the part's skin.

      :Property: Read-only, cannot be set

      :rtype: number

   .. attribute:: thermal_resource_mass

      How much it takes to heat up resources in the part.

      :Property: Read-only, cannot be set

      :rtype: number

   .. attribute:: thermal_conduction_flux

      The speed that heat is conducting into or out of the part
      through contact with other parts. A positive number means
      the part is gaining heat energy, negative means it is
      losing heat energy.

      :Property: Read-only, cannot be set

      :rtype: number

   .. attribute:: thermal_convection_flux

      The speed that heat is convecting into or out of the part
      from the surrounding atmosphere. A positive number means
      the part is gaining heat energy, negative means it is losing
      heat energy.

      :Property: Read-only, cannot be set

      :rtype: number

   .. attribute:: thermal_radiation_flux

      The speed that heat is radiating into or out of the part
      from the surrounding vacuum. A positive number means the part
      is gaining heat energy, negative means it is losing heat energy.

      :Property: Read-only, cannot be set

      :rtype: number

   .. attribute:: thermal_internal_flux

      The speed that heat is generated by the part. For example,
      engines generate heat by burning fuel. A positive number means
      the part is gaining heat energy, negative means it is losing
      heat energy.

      :Property: Read-only, cannot be set

      :rtype: number

   .. attribute:: thermal_skin_to_internal_flux

      The speed that heat is conducting between the part's skin and its internals.

      :Property: Read-only, cannot be set

      :rtype: number

   .. attribute:: resources

      A :class:`Resources` object for the part.

      :Property: Read-only, cannot be set

      :rtype: :class:`Resources`

   .. attribute:: crossfeed

      Whether this part is crossfeed capable.

      :Property: Read-only, cannot be set

      :rtype: boolean

   .. attribute:: fuel_lines_from

      The parts that are connected to this part via fuel lines, where the direction of the fuel line is into this part.

      :Property: Read-only, cannot be set

      :rtype: list of :class:`Part`

      .. note:: See the discussion on :ref:`lua-api-parts-fuel-lines`.
   .. attribute:: fuel_lines_to

      The parts that are connected to this part via fuel lines, where the direction of the fuel line is out of this part.

      :Property: Read-only, cannot be set

      :rtype: list of :class:`Part`

      .. note:: See the discussion on :ref:`lua-api-parts-fuel-lines`.
   .. attribute:: modules

      The modules for this part.

      :Property: Read-only, cannot be set

      :rtype: list of :class:`Module`

   .. attribute:: decoupler

      A :class:`Decoupler` if the part is a decoupler, otherwise ``nil``.

      :Property: Read-only, cannot be set

      :rtype: :class:`Decoupler`

   .. attribute:: docking_port

      A :class:`DockingPort` if the part is a docking port, otherwise ``nil``.

      :Property: Read-only, cannot be set

      :rtype: :class:`DockingPort`

   .. attribute:: engine

      An :class:`Engine` if the part is an engine, otherwise ``nil``.

      :Property: Read-only, cannot be set

      :rtype: :class:`Engine`

   .. attribute:: landing_gear

      A :class:`LandingGear` if the part is a landing gear , otherwise ``nil``.

      :Property: Read-only, cannot be set

      :rtype: :class:`LandingGear`

   .. attribute:: landing_leg

      A :class:`LandingLeg` if the part is a landing leg, otherwise ``nil``.

      :Property: Read-only, cannot be set

      :rtype: :class:`LandingLeg`

   .. attribute:: launch_clamp

      A :class:`LaunchClamp` if the part is a launch clamp, otherwise ``nil``.

      :Property: Read-only, cannot be set

      :rtype: :class:`LaunchClamp`

   .. attribute:: light

      A :class:`Light` if the part is a light, otherwise ``nil``.

      :Property: Read-only, cannot be set

      :rtype: :class:`Light`

   .. attribute:: parachute

      A :class:`Parachute` if the part is a parachute, otherwise ``nil``.

      :Property: Read-only, cannot be set

      :rtype: :class:`Parachute`

   .. attribute:: radiator

      A :class:`Radiator` if the part is a radiator, otherwise ``nil``.

      :Property: Read-only, cannot be set

      :rtype: :class:`Radiator`

   .. attribute:: reaction_wheel

      A :class:`ReactionWheel` if the part is a reaction wheel, otherwise ``nil``.

      :Property: Read-only, cannot be set

      :rtype: :class:`ReactionWheel`

   .. attribute:: sensor

      A :class:`Sensor` if the part is a sensor, otherwise ``nil``.

      :Property: Read-only, cannot be set

      :rtype: :class:`Sensor`

   .. attribute:: solar_panel

      A :class:`SolarPanel` if the part is a solar panel, otherwise ``nil``.

      :Property: Read-only, cannot be set

      :rtype: :class:`SolarPanel`

   .. method:: position(reference_frame)

      The position of the part in the given reference frame.

      :param ReferenceFrame reference_frame:

      :rtype: tuple of (number, number, number)

   .. method:: direction(reference_frame)

      The direction of the part in the given reference frame.

      :param ReferenceFrame reference_frame:

      :rtype: tuple of (number, number, number)

   .. method:: velocity(reference_frame)

      The velocity of the part in the given reference frame.

      :param ReferenceFrame reference_frame:

      :rtype: tuple of (number, number, number)

   .. method:: rotation(reference_frame)

      The rotation of the part in the given reference frame.

      :param ReferenceFrame reference_frame:

      :rtype: tuple of (number, number, number, number)

   .. attribute:: reference_frame

      The reference frame that is fixed relative to this part.

      * The origin is at the position of the part.
      * The axes rotate with the part.
      * The x, y and z axis directions depend on the design of the part.

      :Property: Read-only, cannot be set

      :rtype: :class:`ReferenceFrame`

      .. note::

         For docking port parts, this reference frame is not necessarily equivalent to the reference frame
         for the docking port, returned by :attr:`DockingPort.reference_frame`.

      .. figure:: /images/reference-frames/part.png
         :align: center

         Mk1 Command Pod reference frame origin and axes

Module
------

.. class:: Module

   In KSP, each part has zero or more
   `PartModules <http://wiki.kerbalspaceprogram.com/wiki/CFG_File_Documentation#MODULES>`_
   associated with it. Each one contains some of the functionality of the part.
   For example, an engine has a "ModuleEngines" PartModule that contains all the
   functionality of an engine.
   This class allows you to interact with KSPs PartModules, and any PartModules
   that have been added by other mods.

   .. attribute:: name

      Name of the PartModule. For example, "ModuleEngines".

      :Property: Read-only, cannot be set

      :rtype: string


   .. attribute:: part

      The part that contains this module.

      :Property: Read-only, cannot be set

      :rtype: :class:`Part`


   .. attribute:: fields

      The modules field names and their associated values, as a dictionary.
      These are the values visible in the right-click menu of the part.

      :Property: Read-only, cannot be set

      :rtype: dict from string to string


   .. method:: has_field(name)

      Returns ``True`` if the module has a field with the given name.

      :param string name: Name of the field.

      :rtype: boolean


   .. method:: get_field(name)

      Returns the value of a field.

      :param string name: Name of the field.

      :rtype: string


   .. attribute:: events

      A list of the names of all of the modules events. Events are the clickable buttons
      visible in the right-click menu of the part.

      :Property: Read-only, cannot be set

      :rtype: list of string


   .. method:: has_event(name)

      ``True`` if the module has an event with the given name.

      :param string name:

      :rtype: boolean


   .. method:: trigger_event(name)

      Trigger the named event. Equivalent to clicking the button in the right-click menu of the part.

      :param string name:


   .. attribute:: actions

      A list of all the names of the modules actions. These are the parts actions that can be assigned
      to action groups in the in-game editor.

      :Property: Read-only, cannot be set

      :rtype: list of string


   .. method:: has_action(name)

      ``True`` if the part has an action with the given name.

      :param string name:

      :rtype: boolean


   .. method:: set_action(name, [value = True])

      Set the value of an action with the given name.

      :param string name:

      :param boolean value:




Specific Types of Part
----------------------

The following classes provide functionality for specific types of part.

.. contents::
   :local:

Decoupler
^^^^^^^^^

.. class:: Decoupler

   Obtained by calling :attr:`Part.decoupler`

   .. attribute:: part

      The part object for this decoupler.

      :Property: Read-only, cannot be set

      :rtype: :class:`Part`


   .. method:: decouple()

      Fires the decoupler. Has no effect if the decoupler has already fired.


   .. attribute:: decoupled

      Whether the decoupler has fired.

      :Property: Read-only, cannot be set

      :rtype: boolean


   .. attribute:: impulse

      The impulse that the decoupler imparts when it is fired, in Newton seconds.

      :Property: Read-only, cannot be set

      :rtype: number




Docking Port
^^^^^^^^^^^^

.. class:: DockingPort

   Obtained by calling :attr:`Part.docking_port`

   .. attribute:: part

      The part object for this docking port.

      :Property: Read-only, cannot be set

      :rtype: :class:`Part`

   .. attribute:: name

      The port name of the docking port. This is the name of the port that can be set
      in the right click menu, when the
      `Docking Port Alignment Indicator <http://forum.kerbalspaceprogram.com/threads/43901>`_
      mod is installed. If this mod is not installed, returns the title of the part
      (:attr:`Part.title`).

      :Property: Can be read or written

      :rtype: string

   .. attribute:: state

      The current state of the docking port.

      :Property: Read-only, cannot be set

      :rtype: :class:`DockingPortState`

   .. attribute:: docked_part

      The part that this docking port is docked to. Returns ``nil`` if this
      docking port is not docked to anything.

      :Property: Read-only, cannot be set

      :rtype: :class:`Part`

   .. method:: undock()

      Undocks the docking port and returns the vessel that was undocked from.
      After undocking, the active vessel may change (:attr:`active_vessel`).
      This method can be called for either docking port in a docked pair - both calls will have the same
      effect. Returns ``nil`` if the docking port is not docked to anything.

      :rtype: :class:`Vessel`

   .. attribute:: reengage_distance

      The distance a docking port must move away when it undocks before it
      becomes ready to dock with another port, in meters.

      :Property: Read-only, cannot be set

      :rtype: number

   .. attribute:: has_shield

      Whether the docking port has a shield.

      :Property: Read-only, cannot be set

      :rtype: boolean

   .. attribute:: shielded

      The state of the docking ports shield, if it has one.
      Returns ``True`` if the docking port has a shield, and the shield is
      closed. Otherwise returns ``False``. When set to ``True``, the shield is
      closed, and when set to ``False`` the shield is opened. If the docking
      port does not have a shield, setting this attribute has no effect.

      :Property: Can be read or written

      :rtype: boolean

   .. method:: position(reference_frame)

      The position of the docking port in the given reference frame.

      :rtype: tuple of (number, number, number)

   .. method:: direction(reference_frame)

      The direction that docking port points in, in the given reference frame.

      :rtype: tuple of (number, number, number)

   .. method:: rotation(reference_frame)

      The rotation of the docking port, in the given reference frame.

      :rtype: tuple of (number, number, number, number)

   .. attribute:: reference_frame

      The reference frame that is fixed relative to this docking port, and
      oriented with the port.

      * The origin is at the position of the docking port.
      * The axes rotate with the docking port.
      * The x-axis points out to the right side of the docking port.
      * The y-axis points in the direction the docking port is facing.
      * The z-axis points out of the bottom off the docking port.

      :Property: Read-only, cannot be set

      :rtype: :class:`ReferenceFrame`

      .. note::

         This reference frame is not necessarily equivalent to the reference frame
         for the part, returned by :attr:`Part.reference_frame`.

      .. figure:: /images/reference-frames/docking-port.png
         :align: center

         Docking port reference frame origin and axes

      .. figure:: /images/reference-frames/docking-port-inline.png
         :align: center

         Inline docking port reference frame origin and axes

.. class:: DockingPortState

   See :attr:`DockingPort.state`.

   .. data:: ready

      The docking port is ready to dock to another docking port.

   .. data:: docked

      The docking port is docked to another docking port, or docked to
      another part (from the VAB/SPH).

   .. data:: docking

      The docking port is very close to another docking port,
      but has not docked. It is using magnetic force to acquire a solid dock.

   .. data:: undocking

      The docking port has just been undocked from another docking port,
      and is disabled until it moves away by a sufficient distance
      (:attr:`DockingPort.reengage_distance`).

   .. data:: shielded

      The docking port has a shield, and the shield is closed.

   .. data:: moving

      The docking ports shield is currently opening/closing.


Engine
^^^^^^

.. class:: Engine

   Obtained by calling :attr:`Part.engine`.

   .. attribute:: part

      The part object for this engine.

      :Property: Read-only, cannot be set

      :rtype: :class:`Part`


   .. attribute:: active

      Whether the engine is active. Setting this attribute may have no effect,
      depending on :attr:`Engine.can_shutdown` and :attr:`Engine.can_restart`.

      :Property: Can be read or written

      :rtype: boolean


   .. attribute:: thrust

      The current amount of thrust being produced by the engine, in
      Newtons. Returns zero if the engine is not active or if it has no fuel.

      :Property: Read-only, cannot be set

      :rtype: number


   .. attribute:: available_thrust

      The maximum available amount of thrust that can be produced by the
      engine, in Newtons. This takes :attr:`Engine.thrust_limit` into account,
      and is the amount of thrust produced by the engine when activated and the
      main throttle is set to 100%. Returns zero if the engine does not have any fuel.

      :Property: Read-only, cannot be set

      :rtype: number


   .. attribute:: max_thrust

      Gets the maximum amount of thrust that can be produced by the engine, in
      Newtons. This is the amount of thrust produced by the engine when
      activated, :attr:`Engine.thrust_limit` is set to 100% and the main vessel's
      throttle is set to 100%.

      :Property: Read-only, cannot be set

      :rtype: number


   .. attribute:: max_vacuum_thrust

      The maximum amount of thrust that can be produced by the engine in a
      vacuum, in Newtons. This is the amount of thrust produced by the engine
      when activated, :attr:`Engine.thrust_limit` is set to 100%, the main
      vessel's throttle is set to 100% and the engine is in a vacuum.

      :Property: Read-only, cannot be set

      :rtype: number


   .. attribute:: thrust_limit

      The thrust limiter of the engine. A value between 0 and 1. Setting this
      attribute may have no effect, for example the thrust limit for a solid
      rocket booster cannot be changed in flight.

      :Property: Can be read or written

      :rtype: number


   .. attribute:: specific_impulse

      The current specific impulse of the engine, in seconds. Returns zero
      if the engine is not active.

      :Property: Read-only, cannot be set

      :rtype: number


   .. attribute:: vacuum_specific_impulse

      The vacuum specific impulse of the engine, in seconds.

      :Property: Read-only, cannot be set

      :rtype: number


   .. attribute:: kerbin_sea_level_specific_impulse

      The specific impulse of the engine at sea level on Kerbin, in seconds.

      :Property: Read-only, cannot be set

      :rtype: number


   .. attribute:: propellants

      The names of resources that the engine consumes.

      :Property: Read-only, cannot be set

      :rtype: list of string


   .. attribute:: propellant_ratios

      The ratios of resources that the engine consumes. A dictionary mapping resource names
      to the ratios at which they are consumed by the engine.

      :Property: Read-only, cannot be set

      :rtype: dict from string to number


   .. attribute:: has_fuel

      Whether the engine has run out of fuel (or flamed out).

      :Property: Read-only, cannot be set

      :rtype: boolean


   .. attribute:: throttle

      The current throttle setting for the engine. A value between 0 and 1.
      This is not necessarily the same as the vessel's main throttle
      setting, as some engines take time to adjust their throttle
      (such as jet engines).

      :Property: Read-only, cannot be set

      :rtype: number


   .. attribute:: throttle_locked

      Whether the :attr:`Control.throttle` affects the engine. For example,
      this is ``True`` for liquid fueled rockets, and ``False`` for solid rocket
      boosters.

      :Property: Read-only, cannot be set

      :rtype: boolean


   .. attribute:: can_restart

      Whether the engine can be restarted once shutdown. If the engine cannot be shutdown,
      returns ``False``. For example, this is ``True`` for liquid fueled rockets
      and ``False`` for solid rocket boosters.

      :Property: Read-only, cannot be set

      :rtype: boolean


   .. attribute:: can_shutdown

      Gets whether the engine can be shutdown once activated. For example, this is
      ``True`` for liquid fueled rockets and ``False`` for solid rocket boosters.

      :Property: Read-only, cannot be set

      :rtype: boolean


   .. attribute:: gimballed

      Whether the engine nozzle is gimballed, i.e. can provide a turning force.

      :Property: Read-only, cannot be set

      :rtype: boolean


   .. attribute:: gimbal_range

      The range over which the gimbal can move, in degrees.

      :Property: Read-only, cannot be set

      :rtype: number


   .. attribute:: gimbal_locked

      Whether the engines gimbal is locked in place. Setting this attribute has
      no effect if the engine is not gimballed.

      :Property: Can be read or written

      :rtype: boolean


   .. attribute:: gimbal_limit

      The gimbal limiter of the engine. A value between 0 and 1. Returns 0 if the
      gimbal is locked or the engine is not gimballed. Setting this attribute has
      no effect if the engine is not gimballed.

      :Property: Can be read or written

      :rtype: number




Landing Gear
^^^^^^^^^^^^

.. class:: LandingGear

   Obtained by calling :attr:`Part.landing_gear`.

   .. attribute:: part

      The part object for this landing gear.

      :Property: Read-only, cannot be set

      :rtype: :class:`Part`


   .. attribute:: state

      Gets the current state of the landing gear.

      :Property: Read-only, cannot be set

      :rtype: :class:`LandingGearState`


   .. attribute:: deployed

      Whether the landing gear is deployed.

      :Property: Can be read or written

      :rtype: boolean



.. class:: LandingGearState

   See :attr:`LandingGear.state`.

   .. data:: deployed

      Landing gear is fully deployed.

   .. data:: retracted

      Landing gear is fully retracted.

   .. data:: deploying

      Landing gear is being deployed.

   .. data:: retracting

      Landing gear is being retracted.


Landing Leg
^^^^^^^^^^^

.. class:: LandingLeg

   Obtained by calling :attr:`Part.landing_leg`.

   .. attribute:: part

      The part object for this landing leg.

      :Property: Read-only, cannot be set

      :rtype: :class:`Part`


   .. attribute:: state

      The current state of the landing leg.

      :Property: Read-only, cannot be set

      :rtype: :class:`LandingLegState`


   .. attribute:: deployed

      Whether the landing leg is deployed.

      :Property: Can be read or written

      :rtype: boolean



.. class:: LandingLegState

   See :attr:`LandingLeg.state`.

   .. data:: deployed

      Landing leg is fully deployed.

   .. data:: retracted

      Landing leg is fully retracted.

   .. data:: deploying

      Landing leg is being deployed.

   .. data:: retracting

      Landing leg is being retracted.

   .. data:: broken

      Landing leg is broken.

   .. data:: repairing

      Landing leg is being repaired.


Launch Clamp
^^^^^^^^^^^^

.. class:: LaunchClamp

   Obtained by calling :attr:`Part.launch_clamp`.

   .. attribute:: part

      The part object for this launch clamp.

      :Property: Read-only, cannot be set

      :rtype: :class:`Part`


   .. method:: release()

      Releases the docking clamp. Has no effect if the clamp has already been released.




Light
^^^^^

.. class:: Light

   Obtained by calling :attr:`Part.light`.

   .. attribute:: part

      The part object for this light.

      :Property: Read-only, cannot be set

      :rtype: :class:`Part`


   .. attribute:: active

      Whether the light is switched on.

      :Property: Can be read or written

      :rtype: boolean


   .. attribute:: power_usage

      The current power usage, in units of charge per second.

      :Property: Read-only, cannot be set

      :rtype: number




Parachute
^^^^^^^^^

.. class:: Parachute

   Obtained by calling :attr:`Part.parachute`.

   .. attribute:: part

      The part object for this parachute.

      :Property: Read-only, cannot be set

      :rtype: :class:`Part`


   .. method:: deploy()

      Deploys the parachute. This has no effect if the parachute has already
      been deployed.


   .. attribute:: deployed

      Whether the parachute has been deployed.

      :Property: Read-only, cannot be set

      :rtype: boolean


   .. attribute:: state

      The current state of the parachute.

      :Property: Read-only, cannot be set

      :rtype: :class:`ParachuteState`


   .. attribute:: deploy_altitude

      The altitude at which the parachute will full deploy, in meters.

      :Property: Can be read or written

      :rtype: number


   .. attribute:: deploy_min_pressure

      The minimum pressure at which the parachute will semi-deploy, in atmospheres.

      :Property: Can be read or written

      :rtype: number



.. class:: ParachuteState

   See :attr:`Parachute.state`.

   .. data:: stowed

      The parachute is safely tucked away inside its housing.

   .. data:: active

      The parachute is still stowed, but ready to semi-deploy.

   .. data:: semi_deployed

      The parachute has been deployed and is providing some drag,
      but is not fully deployed yet.

   .. data:: deployed

      The parachute is fully deployed.

   .. data:: cut

      The parachute has been cut.


Radiator
^^^^^^^^

.. class:: Radiator

   Obtained by calling :attr:`Part.radiator`.

   .. attribute:: part

      The part object for this radiator.

      :Property: Read-only, cannot be set

      :rtype: :class:`Part`


   .. attribute:: deployed

      Whether the radiator is extended.

      :Property: Can be read or written

      :rtype: boolean


   .. attribute:: state

      The current state of the radiator.

      :Property: Read-only, cannot be set

      :rtype: :class:`RadiatorState`



.. class:: RadiatorState

   :class:`RadiatorState`

   .. data:: extended

      Radiator is fully extended.

   .. data:: retracted

      Radiator is fully retracted.

   .. data:: extending

      Radiator is being extended.

   .. data:: retracting

      Radiator is being retracted.

   .. data:: broken

      Radiator is being broken.


Reaction Wheel
^^^^^^^^^^^^^^

.. class:: ReactionWheel

   Obtained by calling :attr:`Part.reaction_wheel`.

   .. attribute:: part

      The part object for this reaction wheel.

      :Property: Read-only, cannot be set

      :rtype: :class:`Part`


   .. attribute:: active

      Whether the reaction wheel is active.

      :Property: Can be read or written

      :rtype: boolean


   .. attribute:: broken

      Whether the reaction wheel is broken.

      :Property: Read-only, cannot be set

      :rtype: boolean


   .. attribute:: pitch_torque

      The torque in the pitch axis, in Newton meters.

      :Property: Read-only, cannot be set

      :rtype: number


   .. attribute:: yaw_torque

      The torque in the yaw axis, in Newton meters.

      :Property: Read-only, cannot be set

      :rtype: number


   .. attribute:: roll_torque

      The torque in the roll axis, in Newton meters.

      :Property: Read-only, cannot be set

      :rtype: number




Sensor
^^^^^^

.. class:: Sensor

   Obtained by calling :attr:`Part.sensor`.

   .. attribute:: part

      The part object for this sensor.

      :Property: Read-only, cannot be set

      :rtype: :class:`Part`


   .. attribute:: active

      Whether the sensor is active.

      :Property: Can be read or written

      :rtype: boolean


   .. attribute:: value

      The current value of the sensor.

      :Property: Read-only, cannot be set

      :rtype: string


   .. attribute:: power_usage

      The current power usage of the sensor, in units of charge per second.

      :Property: Read-only, cannot be set

      :rtype: number




Solar Panel
^^^^^^^^^^^

.. class:: SolarPanel

   Obtained by calling :attr:`Part.solar_panel`.

   .. attribute:: part

      The part object for this solar panel.

      :Property: Read-only, cannot be set

      :rtype: :class:`Part`


   .. attribute:: deployed

      Whether the solar panel is extended.

      :Property: Can be read or written

      :rtype: boolean


   .. attribute:: state

      The current state of the solar panel.

      :Property: Read-only, cannot be set

      :rtype: :class:`SolarPanelState`


   .. attribute:: energy_flow

      The current amount of energy being generated by the solar panel, in
      units of charge per second.

      :Property: Read-only, cannot be set

      :rtype: number


   .. attribute:: sun_exposure

      The current amount of sunlight that is incident on the solar panel,
      as a percentage. A value between 0 and 1.

      :Property: Read-only, cannot be set

      :rtype: number



.. class:: SolarPanelState

   See :attr:`SolarPanel.state`.

   .. data:: extended

      Solar panel is fully extended.

   .. data:: retracted

      Solar panel is fully retracted.

   .. data:: extending

      Solar panel is being extended.

   .. data:: retracting

      Solar panel is being retracted.

   .. data:: broken

      Solar panel is broken.


.. _lua-api-parts-trees-of-parts:

Trees of Parts
--------------

Vessels in KSP are comprised of a number of parts, connected to one another in a
*tree* structure. An example vessel is shown in Figure 1, and the corresponding
tree of parts in Figure 2. The craft file for this example can also be
:download:`downloaded here </crafts/PartsTree.craft>`.

.. figure:: /images/api/parts.png
   :align: left
   :figwidth: 275

   **Figure 1** -- Example parts making up a vessel.

.. figure:: /images/api/parts-tree.png
   :align: right
   :figwidth: 275

   **Figure 2** -- Tree of parts for the vessel in Figure 1. Arrows point from
   the parent part to the child part.

.. container:: clearer

   ..

Traversing the Tree
^^^^^^^^^^^^^^^^^^^

The tree of parts can be traversed using the attributes :attr:`Parts.root`,
:attr:`Part.parent` and :attr:`Part.children`.

The root of the tree is the same as the vessels *root part* (part number 1 in
the example above) and can be obtained by calling :attr:`Parts.root`.
A parts children can be obtained by calling :attr:`Part.children`.
If the part does not have any children, :attr:`Part.children`
returns an empty list. A parts parent can be obtained by calling
:attr:`Part.parent`. If the part does not have a parent
(as is the case for the root part), :attr:`Part.parent`
returns ``nil``.

The following lua example uses these attributes to perform a
depth-first traversal over all of the parts in a vessel:


.. code-block:: lua

   local root = vessel.parts.root
   local stack = {{root,0}}
   while #stack > 0 do
     local part,depth = unpack(table.remove(stack))
     print(string.rep(' ', depth) .. part.title)
     for _,child in ipairs(part.children) do
       table.insert(stack, {child, depth+1})
     end
   end


When this code is execute using the craft file for the example vessel pictured
above, the following is printed out::

    Command Pod Mk1
     TR-18A Stack Decoupler
      FL-T400 Fuel Tank
       LV-909 Liquid Fuel Engine
        TR-18A Stack Decoupler
         FL-T800 Fuel Tank
          LV-909 Liquid Fuel Engine
          TT-70 Radial Decoupler
           FL-T400 Fuel Tank
            TT18-A Launch Stability Enhancer
            FTX-2 External Fuel Duct
            LV-909 Liquid Fuel Engine
            Aerodynamic Nose Cone
          TT-70 Radial Decoupler
           FL-T400 Fuel Tank
            TT18-A Launch Stability Enhancer
            FTX-2 External Fuel Duct
            LV-909 Liquid Fuel Engine
            Aerodynamic Nose Cone
       LT-1 Landing Struts
       LT-1 Landing Struts
     Mk16 Parachute

.. _lua-api-parts-attachment-modes:

Attachment Modes
^^^^^^^^^^^^^^^^

Parts can be attached to other parts either *radially* (on the side of the
parent part) or *axially* (on the end of the parent part, to form a stack).

For example, in the vessel pictured above, the parachute (part 2) is *axially*
connected to its parent (the command pod -- part 1), and the landing leg
(part 5) is *radially* connected to its parent (the fuel tank -- part 4).

The root part of a vessel (for example the command pod -- part 1) does not have
a parent part, so does not have an attachment mode. However, the part is
consider to be *axially* attached to nothing.

The following lua example does a depth-first traversal as before,
but also prints out the attachment mode used by the part:


.. code-block:: lua

   local root = vessel.parts.root
   local stack = {{root, 0}}
   while #stack > 0 do
     local part,depth = unpack(table.remove(stack))
     local attach_mode
     if part.axially_attached then
       attach_mode = 'axial'
     else -- radially_attached
       attach_mode = 'radial'
     end
     print(string.rep(' ', depth) .. part.title .. ' - ' .. attach_mode)
     for _,child in ipairs(part.children) do
       table.insert(stack, {child, depth+1})
     end
   end


When this code is execute using the craft file for the example vessel pictured
above, the following is printed out::

 Command Pod Mk1 - axial
  TR-18A Stack Decoupler - axial
   FL-T400 Fuel Tank - axial
    LV-909 Liquid Fuel Engine - axial
     TR-18A Stack Decoupler - axial
      FL-T800 Fuel Tank - axial
       LV-909 Liquid Fuel Engine - axial
       TT-70 Radial Decoupler - radial
        FL-T400 Fuel Tank - radial
         TT18-A Launch Stability Enhancer - radial
         FTX-2 External Fuel Duct - radial
         LV-909 Liquid Fuel Engine - axial
         Aerodynamic Nose Cone - axial
       TT-70 Radial Decoupler - radial
        FL-T400 Fuel Tank - radial
         TT18-A Launch Stability Enhancer - radial
         FTX-2 External Fuel Duct - radial
         LV-909 Liquid Fuel Engine - axial
         Aerodynamic Nose Cone - axial
    LT-1 Landing Struts - radial
    LT-1 Landing Struts - radial
  Mk16 Parachute - axial

.. _lua-api-parts-fuel-lines:

Fuel Lines
----------

.. figure:: /images/api/parts-fuel-lines.png
   :align: right
   :figwidth: 200

   **Figure 5** -- Fuel lines from the example in Figure 1. Fuel flows from the
   parts highlighted in green, into the part highlighted in blue.

.. figure:: /images/api/parts-fuel-lines-tree.png
   :align: right
   :figwidth: 200

   **Figure 4** -- A subset of the parts tree from Figure 2 above.

Fuel lines are considered parts, and are included in the parts tree (for
example, as pictured in Figure 4). However, the parts tree does not contain
information about which parts fuel lines connect to. The parent part of a fuel
line is the part from which it will take fuel (as shown in Figure 4) however the
part that it will send fuel to is not represented in the parts tree.

Figure 5 shows the fuel lines from the example vessel pictured earlier. Fuel
line part 15 (in red) takes fuel from a fuel tank (part 11 -- in green) and
feeds it into another fuel tank (part 9 -- in blue). The fuel line is therefore
a child of part 11, but its connection to part 9 is not represented in the tree.

The attributes :attr:`Part.fuel_lines_from` and
:attr:`Part.fuel_lines_to` can be used to discover these

connections. In the example in Figure 5, when :attr:`Part.fuel_lines_to`
is called on fuel tank part 11, it will return a list of parts containing just

fuel tank part 9 (the blue part). When :attr:`Part.fuel_lines_from`
is called on fuel tank part 9, it will return a list containing fuel tank parts
11 and 17 (the parts colored green).

.. _lua-api-parts-staging:

Staging
-------

.. figure:: /images/api/parts-staging.png
   :align: right
   :figwidth: 340

   **Figure 6** -- Example vessel from Figure 1 with a staging sequence.

Each part has two staging numbers associated with it: the stage in which the
part is *activated* and the stage in which the part is *decoupled*. These values
can be obtained using :attr:`Part.stage` and
:attr:`Part.decouple_stage` respectively. For parts that
are not activated by staging, :attr:`Part.stage` returns
-1. For parts that are never decoupled,
:attr:`Part.decouple_stage` returns a value of -1.

Figure 6 shows an example staging sequence for a vessel. Figure 7 shows the
stages in which each part of the vessel will be *activated*. Figure 8 shows the
stages in which each part of the vessel will be *decoupled*.

.. container:: clearer

   ..

.. figure:: /images/api/parts-staging-activate.png
   :align: left
   :figwidth: 250

   **Figure 7** -- The stage in which each part is *activated*.

.. figure:: /images/api/parts-staging-decouple.png
   :align: right
   :figwidth: 250

   **Figure 8** -- The stage in which each part is *decoupled*.

.. container:: clearer

   ..
